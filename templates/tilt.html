{% extends "base.html" %}

{% block title %}Cognnect - Tilt Test{% endblock %}

<!--remove sidebar-->
{% block sidebar %}{% endblock %}

{% block link %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/tilt.css') }}">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="{{ url_for('static', filename='scripts/tilt/cam.js') }}" defer></script>
{% endblock %}

{% block body %}

    {% block nav %}
        {% include "nav.html" %}
    {% endblock nav %}

    {% include "flashes.html" %}

    <div class="row justify-content-center">
        <div class="col-md-8">
            {% block content %}
            <div class="content-section">

                {% if session.is_logged %}
                <div class="splash">
                    <p class="about">
                        Tilt your head to both sides as far as you can. <br>
                        The maximum angles for both sides will be shown below.
                    </p>
                    <button class="start btn btn-primary">Start</button>
                </div>

                <div class="main">
                    <div style="position: relative" class="margin">
                        <video id="inputVideo" autoplay muted></video>
                        <canvas id="overlay">
                    </div>
                    <div class="ui">
                        <div class="abs-angle" id="angle"></div><br>
                        <div class="left-angle">
                            Left: <span id="left-angle-txt"></span>
                        </div>
                        <div class="right-angle">
                            Right: <span id="right-angle-txt"></span>
                        </div>
                    </div>
                    <hr>
                    <a href="/myaccount" class="btn btn-primary end-test">End Test</a>
                </div>


                {% else %}
                    <div class="login-error">
                        You need to be logged in to take the Tilt Test. You can log in <a class="ml-0" href="{{ url_for('login') }}">here</a>.
                    </div>
                {% endif %}

            </div>
            {% endblock content %}
        </div>
    </div>

{% block bootstrapjs %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
{% endblock bootstrapjs %}

{% endblock body %}